# For most projects, this workflow file will not need changing; you simply need
# to commit it to your repository.
#
# You may wish to alter this file to override the set of languages analyzed,
# or to provide custom queries or build logic.
#
# ******** NOTE ********
# We have attempted to detect the languages in your repository. Please check
# the `language` matrix defined below to confirm you have the correct set of
# supported CodeQL languages.
#
name: "CodeQL"

on:
  workflow_dispatch

jobs:
  analyze:
    name: Analyze
    runs-on: ubuntu-latest
    permissions:
      actions: read
      contents: read
      security-events: write

    strategy:
      fail-fast: false
      matrix:
        language: [ 'java', 'javascript' ]
        # CodeQL supports [ 'cpp', 'csharp', 'go', 'java', 'javascript', 'python', 'ruby' ]
        # Learn more about CodeQL language support at https://aka.ms/codeql-docs/language-support

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    # Initializes the CodeQL tools for scanning.
    - name: Initialize CodeQL
      uses: github/codeql-action/init@v2
      with:
        languages: ${{ matrix.language }}
        # If you wish to specify custom queries, you can do so here or in a config file.
        # By default, queries listed here will override any specified in a config file.
        # Prefix the list here with "+" to use these queries and those in the config file.
        
        # Details on CodeQL's query packs refer to : https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/configuring-code-scanning#using-queries-in-ql-packs
        # queries: security-extended,security-and-quality

        
    # Autobuild attempts to build any compiled languages  (C/C++, C#, or Java).
    # If this step fails, then you should remove it and run the build manually (see below)
    #- name: Autobuild
    #  uses: github/codeql-action/autobuild@v2

    # ‚ÑπÔ∏è Command-line programs to run using the OS shell.
    # üìö See https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun

    #   If the Autobuild fails above, remove it and uncomment the following three lines. 
    #   modify them (or add more) to build your code if your project, please refer to the EXAMPLE below for guidance.

    - name: Gradle Build Action
      # You may pin to the exact commit or the version.
      # uses: gradle/gradle-build-action@e88ed3e650b26bd116cfee53cf198c1f6856682d
      uses: gradle/gradle-build-action@v2.2.0
      with:
        # Gradle version to use
        gradle-version: # optional
        # When 'true', all caching is disabled. No entries will be written to or read from the cache.
        cache-disabled: # optional
        # When 'true', existing entries will be read from the cache but no entries will be written. By default this value is 'false' for workflows on the GitHub default branch and 'true' for workflows on other branches.

        cache-read-only: # optional, default is ${{ github.ref_name != github.event.repository.default_branch }}
        # When 'true', entries will not be restored from the cache but will be saved at the end of the Job.  Setting this to 'true' implies cache-read-only will be 'false'.

        cache-write-only: # optional
        # Paths within Gradle User Home to cache.
        gradle-home-cache-includes: # optional, default is caches notifications

       # Paths within Gradle User Home to exclude from cache.
        gradle-home-cache-excludes: # optional
        # Gradle command line arguments (supports multi-line input)
        arguments: # optional
        # Path to the root directory of the build
        build-root-directory: # optional
        # Path to the Gradle executable
        gradle-executable: # optional
        # When 'false', no Job Summary will be generated for the Job.
        generate-job-summary: # optional, default is true
        # When 'true', the action will not attempt to restore the Gradle User Home entries from other Jobs.
        gradle-home-cache-strict-match: # optional
        # Used to uniquely identify the current job invocation. Defaults to the matrix values for this job; this should not be overridden by users (INTERNAL).
        workflow-job-context: # optional, default is ${{ toJSON(matrix) }}

    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v2
